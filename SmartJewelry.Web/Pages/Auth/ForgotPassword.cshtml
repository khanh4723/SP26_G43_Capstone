@page
@model SmartJewelry.Web.Pages.Auth.ForgotPasswordModel
@{
    ViewData["Title"] = "Quên mật khẩu";
    Layout = null;
}

<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewData["Title"] - Smart Jewelry</title>
    <link rel="stylesheet" href="~/css/auth.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>

<div class="auth-wrapper">
    <!-- Left Panel - Branding -->
    <div class="auth-branding">
        <div class="branding-content">
            <div class="brand-logo">
                <i class="fas fa-gem"></i>
            </div>
            <h1 class="brand-name">Smart Jewelry</h1>
            <p class="brand-tagline">Trang sức & Đá quý cao cấp</p>
            
            <ul class="brand-features">
                <li>
                    <i class="fas fa-envelope-open-text"></i>
                    <span>Nhập email đã đăng ký của bạn</span>
                </li>
                <li>
                    <i class="fas fa-key"></i>
                    <span>Nhận mã 6 ký tự qua email</span>
                </li>
                <li>
                    <i class="fas fa-shield-alt"></i>
                    <span>An toàn và bảo mật</span>
                </li>
            </ul>
        </div>
    </div>

    <!-- Right Panel - Form -->
    <div class="auth-form-panel">
        <div class="auth-form-container">
            <a href="/Auth/Login" class="back-link">
                <i class="fas fa-arrow-left"></i>
                Quay lại đăng nhập
            </a>

            @if (Model.EmailSent)
            {
                <!-- Success State -->
                <div class="auth-header">
                    <div class="success-icon">
                        <i class="fas fa-check"></i>
                    </div>
                    <h1>Kiểm tra email</h1>
                    <p>Chúng tôi đã gửi link đặt lại mật khẩu đến email của bạn</p>
                </div>

                <div class="alert alert-info">
                    <i class="fas fa-info-circle"></i>
                    <div>
                        <p><strong>Link sẽ hết hạn sau 30 phút.</strong></p>
                        <p style="margin-top: 8px; opacity: 0.8;">Không nhận được email? Kiểm tra thư mục Spam hoặc <a href="/Auth/ForgotPassword">thử lại</a>.</p>
                    </div>
                </div>

                <a href="/Auth/Login" class="btn btn-primary btn-block">
                    <i class="fas fa-sign-in-alt"></i>
                    Quay lại đăng nhập
                </a>
            }
            else
            {
                <!-- Form State -->
                <div class="auth-header">
                    <h1>Quên mật khẩu?</h1>
                    <p>Nhập email của bạn để nhận link đặt lại mật khẩu</p>
                </div>

                @if (!string.IsNullOrEmpty(Model.ErrorMessage))
                {
                    <div class="alert alert-error">
                        <i class="fas fa-exclamation-circle"></i>
                        <span>@Model.ErrorMessage</span>
                    </div>
                }

                <form method="post" class="auth-form">
                    @Html.AntiForgeryToken()
                    
                    <div class="form-group">
                        <label asp-for="Input.Email">Địa chỉ Email <span class="required">*</span></label>
                        <div class="input-wrapper">
                            <i class="fas fa-envelope"></i>
                            <input type="email" 
                                   asp-for="Input.Email"
                                   placeholder="you@example.com"
                                   autocomplete="email" />
                        </div>
                        <span asp-validation-for="Input.Email" class="field-validation-error"></span>
                    </div>

                    <button type="submit" class="btn btn-primary btn-block">
                        <i class="fas fa-paper-plane"></i>
                        Gửi link đặt lại mật khẩu
                    </button>
                </form>
            }

            <div class="auth-footer">
                <p>Nhớ mật khẩu rồi? <a href="/Auth/Login">Đăng nhập</a></p>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery-validation@1.19.5/dist/jquery.validate.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery-validation-unobtrusive@3.2.12/dist/jquery.validate.unobtrusive.min.js"></script>
</body>
</html>
